(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();function d(){}function gt(e){return e&&typeof e=="object"&&typeof e.then=="function"}function at(e){return e()}function rt(){return Object.create(null)}function z(e){e.forEach(at)}function dt(e){return typeof e=="function"}function B(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function bt(e){return Object.keys(e).length===0}function xt(e,...t){if(e==null)return d;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function mt(e,t,n){e.$$.on_destroy.push(xt(t,n))}function st(e){return e==null?"":e}function J(e,t){e.appendChild(t)}function _(e,t,n){e.insertBefore(t,n||null)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function b(e){return document.createElement(e)}function wt(e){return document.createTextNode(e)}function A(){return wt(" ")}function ot(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function N(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function vt(e){return Array.from(e.childNodes)}function y(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}let K;function L(e){K=e}function pt(){if(!K)throw new Error("Function called outside component initialization");return K}function $t(e){pt().$$.on_mount.push(e)}const F=[],it=[],U=[],ct=[],kt=Promise.resolve();let tt=!1;function Ct(){tt||(tt=!0,kt.then(et))}function X(e){U.push(e)}const Z=new Set;let Q=0;function et(){const e=K;do{for(;Q<F.length;){const t=F[Q];Q++,L(t),Tt(t.$$)}for(L(null),F.length=0,Q=0;it.length;)it.pop()();for(let t=0;t<U.length;t+=1){const n=U[t];Z.has(n)||(Z.add(n),n())}U.length=0}while(F.length);for(;ct.length;)ct.pop()();tt=!1,Z.clear(),L(e)}function Tt(e){if(e.fragment!==null){e.update(),z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(X)}}const V=new Set;let P;function St(){P={r:0,c:[],p:P}}function Et(){P.r||z(P.c),P=P.p}function x(e,t){e&&e.i&&(V.delete(e),e.i(t))}function v(e,t,n,r){if(e&&e.o){if(V.has(e))return;V.add(e),P.c.push(()=>{V.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function lt(e,t){const n=t.token={};function r(s,c,l,u){if(t.token!==n)return;t.resolved=u;let f=t.ctx;l!==void 0&&(f=f.slice(),f[l]=u);const o=s&&(t.current=s)(f);let $=!1;t.block&&(t.blocks?t.blocks.forEach((m,w)=>{w!==c&&m&&(St(),v(m,1,1,()=>{t.blocks[w]===m&&(t.blocks[w]=null)}),Et())}):t.block.d(1),o.c(),x(o,1),o.m(t.mount(),t.anchor),$=!0),t.block=o,t.blocks&&(t.blocks[c]=o),$&&et()}if(gt(e)){const s=pt();if(e.then(c=>{L(s),r(t.then,1,t.value,c),L(null)},c=>{if(L(s),r(t.catch,2,t.error,c),L(null),!t.hasCatch)throw c}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function S(e){e&&e.c()}function C(e,t,n,r){const{fragment:s,after_update:c}=e.$$;s&&s.m(t,n),r||X(()=>{const l=e.$$.on_mount.map(at).filter(dt);e.$$.on_destroy?e.$$.on_destroy.push(...l):z(l),e.$$.on_mount=[]}),c.forEach(X)}function T(e,t){const n=e.$$;n.fragment!==null&&(z(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Lt(e,t){e.$$.dirty[0]===-1&&(F.push(e),Ct(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function D(e,t,n,r,s,c,l,u=[-1]){const f=K;L(e);const o=e.$$={fragment:null,ctx:[],props:c,update:d,not_equal:s,bound:rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:rt(),dirty:u,skip_bound:!1,root:t.target||f.$$.root};l&&l(o.root);let $=!1;if(o.ctx=n?n(e,t.props||{},(m,w,...a)=>{const h=a.length?a[0]:w;return o.ctx&&s(o.ctx[m],o.ctx[m]=h)&&(!o.skip_bound&&o.bound[m]&&o.bound[m](h),$&&Lt(e,m)),w}):[],o.update(),$=!0,z(o.before_update),o.fragment=r?r(o.ctx):!1,t.target){if(t.hydrate){const m=vt(t.target);o.fragment&&o.fragment.l(m),m.forEach(p)}else o.fragment&&o.fragment.c();t.intro&&x(e.$$.fragment),C(e,t.target,t.anchor,t.customElement),et()}L(f)}class G{$destroy(){T(this,1),this.$destroy=d}$on(t,n){if(!dt(n))return d;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!bt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const W=[];function nt(e,t=d){let n;const r=new Set;function s(u){if(B(e,u)&&(e=u,n)){const f=!W.length;for(const o of r)o[1](),W.push(o,e);if(f){for(let o=0;o<W.length;o+=2)W[o][0](W[o+1]);W.length=0}}}function c(u){s(u(e))}function l(u,f=d){const o=[u,f];return r.add(o),r.size===1&&(n=t(s)||d),u(e),()=>{r.delete(o),r.size===0&&(n(),n=null)}}return{set:s,update:c,subscribe:l}}const R=nt(""),_t=nt(""),q=nt("disconnected"),ht="http://localhost:10231",At=ht+"/connect",Nt=ht+"/completion";let yt;q.subscribe(e=>{yt=e});const ut=async()=>{await fetch(At).then(e=>e.text()).then(e=>{yt!="working"&&(e==="connected"?q.set("connected"):q.set("disconnected"))}).catch(e=>{console.error(e),q.set("disconnected")})},ft=async e=>{q.set("working"),await fetch(Nt+`?prompt=${e}`).then(t=>t.text()).then(t=>{q.set("connected"),_t.set(t)}).catch(t=>{console.error(t)})};function Ot(e){let t;return{c(){t=b("span"),N(t,"class","svelte-1rn9lw9")},m(n,r){_(n,t,r)},p:d,i:d,o:d,d(n){n&&p(t)}}}class j extends G{constructor(t){super(),D(this,t,null,Ot,B,{})}}function jt(e){let t,n,r,s,c,l,u,f,o,$,m,w,a,h,I,k,E,Y,O,M,H;return t=new j({}),s=new j({}),u=new j({}),$=new j({}),a=new j({}),k=new j({}),O=new j({}),{c(){n=b("div"),S(t.$$.fragment),r=A(),c=b("div"),S(s.$$.fragment),l=A(),f=b("div"),S(u.$$.fragment),o=A(),m=b("div"),S($.$$.fragment),w=A(),h=b("div"),S(a.$$.fragment),I=A(),E=b("div"),S(k.$$.fragment),Y=A(),M=b("div"),S(O.$$.fragment),y(n,"display","contents"),y(n,"--width","5em"),y(c,"display","contents"),y(c,"--width","2em"),y(f,"display","contents"),y(f,"--width","1em"),y(m,"display","contents"),y(m,"--width","4em"),y(h,"display","contents"),y(h,"--width","2em"),y(E,"display","contents"),y(E,"--width","0.5em"),y(M,"display","contents"),y(M,"--width","0.5em")},m(i,g){_(i,n,g),C(t,n,null),_(i,r,g),_(i,c,g),C(s,c,null),_(i,l,g),_(i,f,g),C(u,f,null),_(i,o,g),_(i,m,g),C($,m,null),_(i,w,g),_(i,h,g),C(a,h,null),_(i,I,g),_(i,E,g),C(k,E,null),_(i,Y,g),_(i,M,g),C(O,M,null),H=!0},p:d,i(i){H||(x(t.$$.fragment,i),x(s.$$.fragment,i),x(u.$$.fragment,i),x($.$$.fragment,i),x(a.$$.fragment,i),x(k.$$.fragment,i),x(O.$$.fragment,i),H=!0)},o(i){v(t.$$.fragment,i),v(s.$$.fragment,i),v(u.$$.fragment,i),v($.$$.fragment,i),v(a.$$.fragment,i),v(k.$$.fragment,i),v(O.$$.fragment,i),H=!1},d(i){i&&t&&p(n),T(t,i),i&&p(r),i&&s&&p(c),T(s,i),i&&p(l),i&&u&&p(f),T(u,i),i&&p(o),i&&$&&p(m),T($,i),i&&p(w),i&&a&&p(h),T(a,i),i&&p(I),i&&k&&p(E),T(k,i),i&&p(Y),i&&O&&p(M),T(O,i)}}}class Pt extends G{constructor(t){super(),D(this,t,null,jt,B,{})}}function qt(e){return{c:d,m:d,i:d,o:d,d}}function Mt(e){return{c:d,m:d,i:d,o:d,d}}function Wt(e){let t,n;return t=new Pt({}),{c(){S(t.$$.fragment)},m(r,s){C(t,r,s),n=!0},i(r){n||(x(t.$$.fragment,r),n=!0)},o(r){v(t.$$.fragment,r),n=!1},d(r){T(t,r)}}}function zt(e){let t,n,r,s,c,l={ctx:e,current:null,token:null,hasCatch:!1,pending:Wt,then:Mt,catch:qt,blocks:[,,,]};return lt(n=e[0],l),{c(){t=b("div"),l.block.c(),N(t,"contenteditable","true"),N(t,"id","writingWindow"),N(t,"class","svelte-1v727i3"),e[1]===void 0&&X(()=>e[4].call(t))},m(u,f){_(u,t,f),l.block.m(t,l.anchor=null),l.mount=()=>t,l.anchor=null,e[1]!==void 0&&(t.textContent=e[1]),r=!0,s||(c=[ot(t,"input",e[4]),ot(t,"keydown",e[2])],s=!0)},p(u,[f]){e=u,l.ctx=e,f&1&&n!==(n=e[0])&&lt(n,l),f&2&&e[1]!==t.textContent&&(t.textContent=e[1])},i(u){r||(x(l.block),r=!0)},o(u){for(let f=0;f<3;f+=1){const o=l.blocks[f];v(o)}r=!1},d(u){u&&p(t),l.block.d(),l.token=null,l=null,s=!1,z(c)}}}function Bt(e,t,n){let r;mt(e,R,a=>n(1,r=a));let s;R.subscribe(a=>{s=a});let c;_t.subscribe(a=>{c=a});let l=null;$t(()=>{n(0,l=o())});const u=a=>a.replace(/(\r\n|\n|\r)/gm,""),f=a=>{let h=document.createElement("div");return h.innerHTML=a,h.textContent||h.innerText||""},o=async()=>{await ft("Start a fictional fairytale story:");let a=u(c);R.set(a)},$=async(a,h)=>{a=f(a),await ft(a),s.length,c.length;let I=u(c);await R.set(s+" "+I);var k=document.createRange(),E=window.getSelection();k.setStart(h.childNodes[0],r.length),k.collapse(!0),E.removeAllRanges(),E.addRange(k)},m=a=>{typeof a<"u"?a.keyCode:a.which,a.key==="Tab"&&(a.preventDefault(),n(0,l=$("continue this story: "+r,a.target)))};function w(){r=this.textContent,R.set(r)}return[l,r,m,u,w]}class It extends G{constructor(t){super(),D(this,t,Bt,zt,B,{formatText:3})}get formatText(){return this.$$.ctx[3]}}function Rt(e){let t,n;return{c(){t=b("div"),N(t,"id","status"),N(t,"class",n=st(e[0])+" svelte-ypevce")},m(r,s){_(r,t,s)},p(r,[s]){s&1&&n!==(n=st(r[0])+" svelte-ypevce")&&N(t,"class",n)},i:d,o:d,d(r){r&&p(t)}}}function Ft(e,t,n){let r;mt(e,q,c=>n(0,r=c)),$t(async()=>{s()});const s=async()=>{ut(),setInterval(async()=>{ut()},2e3)};return[r]}class Kt extends G{constructor(t){super(),D(this,t,Ft,Rt,B,{})}}function Dt(e){let t,n,r,s,c,l,u,f;return s=new Kt({}),u=new It({}),{c(){t=b("main"),n=b("h1"),n.textContent="Adventure Writer",r=A(),S(s.$$.fragment),c=A(),l=b("div"),S(u.$$.fragment),N(l,"class","card")},m(o,$){_(o,t,$),J(t,n),J(t,r),C(s,t,null),J(t,c),J(t,l),C(u,l,null),f=!0},p:d,i(o){f||(x(s.$$.fragment,o),x(u.$$.fragment,o),f=!0)},o(o){v(s.$$.fragment,o),v(u.$$.fragment,o),f=!1},d(o){o&&p(t),T(s),T(u)}}}class Gt extends G{constructor(t){super(),D(this,t,null,Dt,B,{})}}new Gt({target:document.getElementById("app")});
