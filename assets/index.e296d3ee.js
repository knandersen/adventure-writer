(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function h(){}const wt=e=>e;function Mt(e){return e&&typeof e=="object"&&typeof e.then=="function"}function vt(e){return e()}function pt(){return Object.create(null)}function X(e){e.forEach(vt)}function G(e){return typeof e=="function"}function j(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Nt(e){return Object.keys(e).length===0}function Pt(e,...t){if(e==null)return h;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function kt(e,t,n){e.$$.on_destroy.push(Pt(t,n))}function _t(e){return e==null?"":e}const xt=typeof window<"u";let Ot=xt?()=>window.performance.now():()=>Date.now(),ut=xt?e=>requestAnimationFrame(e):h;const J=new Set;function Lt(e){J.forEach(t=>{t.c(e)||(J.delete(t),t.f())}),J.size!==0&&ut(Lt)}function jt(e){let t;return J.size===0&&ut(Lt),{promise:new Promise(n=>{J.add(t={c:e,f:n})}),abort(){J.delete(t)}}}function D(e,t){e.appendChild(t)}function Ct(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function qt(e){const t=w("style");return Bt(Ct(e),t),t.sheet}function Bt(e,t){return D(e.head||e,t),t.sheet}function b(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function w(e){return document.createElement(e)}function Ht(e){return document.createTextNode(e)}function P(){return Ht(" ")}function B(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function z(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Wt(e){return Array.from(e.childNodes)}function v(e,t,n,s){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function Et(e,t,{bubbles:n=!1,cancelable:s=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,s,t),r}const st=new Map;let ot=0;function Rt(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function It(e,t){const n={stylesheet:qt(t),rules:{}};return st.set(e,n),n}function Dt(e,t,n,s,r,i,o,l=0){const f=16.666/s;let c=`{
`;for(let y=0;y<=1;y+=f){const A=t+(n-t)*i(y);c+=y*100+`%{${o(A,1-A)}}
`}const d=c+`100% {${o(n,1-n)}}
}`,a=`__svelte_${Rt(d)}_${l}`,$=Ct(e),{stylesheet:m,rules:_}=st.get($)||It($,e);_[a]||(_[a]=!0,m.insertRule(`@keyframes ${a} ${d}`,m.cssRules.length));const E=e.style.animation||"";return e.style.animation=`${E?`${E}, `:""}${a} ${s}ms linear ${r}ms 1 both`,ot+=1,a}function ht(e,t){const n=(e.style.animation||"").split(", "),s=n.filter(t?i=>i.indexOf(t)<0:i=>i.indexOf("__svelte")===-1),r=n.length-s.length;r&&(e.style.animation=s.join(", "),ot-=r,ot||Ft())}function Ft(){ut(()=>{ot||(st.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&g(t)}),st.clear())})}let tt;function O(e){tt=e}function ft(){if(!tt)throw new Error("Function called outside component initialization");return tt}function at(e){ft().$$.on_mount.push(e)}function Vt(){const e=ft();return(t,n,{cancelable:s=!1}={})=>{const r=e.$$.callbacks[t];if(r){const i=Et(t,n,{cancelable:s});return r.slice().forEach(o=>{o.call(e,i)}),!i.defaultPrevented}return!0}}const Z=[],Q=[],nt=[],$t=[],Kt=Promise.resolve();let lt=!1;function Gt(){lt||(lt=!0,Kt.then(dt))}function U(e){nt.push(e)}const it=new Set;let et=0;function dt(){const e=tt;do{for(;et<Z.length;){const t=Z[et];et++,O(t),Jt(t.$$)}for(O(null),Z.length=0,et=0;Q.length;)Q.pop()();for(let t=0;t<nt.length;t+=1){const n=nt[t];it.has(n)||(it.add(n),n())}nt.length=0}while(Z.length);for(;$t.length;)$t.pop()();lt=!1,it.clear(),O(e)}function Jt(e){if(e.fragment!==null){e.update(),X(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(U)}}let Y;function Qt(){return Y||(Y=Promise.resolve(),Y.then(()=>{Y=null})),Y}function gt(e,t,n){e.dispatchEvent(Et(`${t?"intro":"outro"}${n}`))}const rt=new Set;let I;function Ut(){I={r:0,c:[],p:I}}function Xt(){I.r||X(I.c),I=I.p}function k(e,t){e&&e.i&&(rt.delete(e),e.i(t))}function x(e,t,n,s){if(e&&e.o){if(rt.has(e))return;rt.add(e),I.c.push(()=>{rt.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}const Yt={duration:0};function Zt(e,t,n){let s=t(e,n),r=!1,i,o,l=0;function f(){i&&ht(e,i)}function c(){const{delay:a=0,duration:$=300,easing:m=wt,tick:_=h,css:E}=s||Yt;E&&(i=Dt(e,0,1,$,a,m,E,l++)),_(0,1);const y=Ot()+a,A=y+$;o&&o.abort(),r=!0,U(()=>gt(e,!0,"start")),o=jt(M=>{if(r){if(M>=A)return _(1,0),gt(e,!0,"end"),f(),r=!1;if(M>=y){const p=m((M-y)/$);_(p,1-p)}}return r})}let d=!1;return{start(){d||(d=!0,ht(e),G(s)?(s=s(),Qt().then(c)):c())},invalidate(){d=!1},end(){r&&(f(),r=!1)}}}function yt(e,t){const n=t.token={};function s(r,i,o,l){if(t.token!==n)return;t.resolved=l;let f=t.ctx;o!==void 0&&(f=f.slice(),f[o]=l);const c=r&&(t.current=r)(f);let d=!1;t.block&&(t.blocks?t.blocks.forEach((a,$)=>{$!==i&&a&&(Ut(),x(a,1,1,()=>{t.blocks[$]===a&&(t.blocks[$]=null)}),Xt())}):t.block.d(1),c.c(),k(c,1),c.m(t.mount(),t.anchor),d=!0),t.block=c,t.blocks&&(t.blocks[i]=c),d&&dt()}if(Mt(e)){const r=ft();if(e.then(i=>{O(r),s(t.then,1,t.value,i),O(null)},i=>{if(O(r),s(t.catch,2,t.error,i),O(null),!t.hasCatch)throw i}),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,e),!0;t.resolved=e}}function T(e){e&&e.c()}function L(e,t,n,s){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),s||U(()=>{const o=e.$$.on_mount.map(vt).filter(G);e.$$.on_destroy?e.$$.on_destroy.push(...o):X(o),e.$$.on_mount=[]}),i.forEach(U)}function C(e,t){const n=e.$$;n.fragment!==null&&(X(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function te(e,t){e.$$.dirty[0]===-1&&(Z.push(e),Gt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function H(e,t,n,s,r,i,o,l=[-1]){const f=tt;O(e);const c=e.$$={fragment:null,ctx:[],props:i,update:h,not_equal:r,bound:pt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:pt(),dirty:l,skip_bound:!1,root:t.target||f.$$.root};o&&o(c.root);let d=!1;if(c.ctx=n?n(e,t.props||{},(a,$,...m)=>{const _=m.length?m[0]:$;return c.ctx&&r(c.ctx[a],c.ctx[a]=_)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](_),d&&te(e,a)),$}):[],c.update(),d=!0,X(c.before_update),c.fragment=s?s(c.ctx):!1,t.target){if(t.hydrate){const a=Wt(t.target);c.fragment&&c.fragment.l(a),a.forEach(g)}else c.fragment&&c.fragment.c();t.intro&&k(e.$$.fragment),L(e,t.target,t.anchor,t.customElement),dt()}O(f)}class W{$destroy(){C(this,1),this.$destroy=h}$on(t,n){if(!G(n))return h;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(t){this.$$set&&!Nt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const V=[];function mt(e,t=h){let n;const s=new Set;function r(l){if(j(e,l)&&(e=l,n)){const f=!V.length;for(const c of s)c[1](),V.push(c,e);if(f){for(let c=0;c<V.length;c+=2)V[c][0](V[c+1]);V.length=0}}}function i(l){r(l(e))}function o(l,f=h){const c=[l,f];return s.add(c),s.size===1&&(n=t(r)||h),l(e),()=>{s.delete(c),s.size===0&&(n(),n=null)}}return{set:r,update:i,subscribe:o}}const K=mt(""),ct=mt(""),F=mt("disconnected"),At="https://openai-server-n8us.onrender.com",ee=At+"/connect",ne=At+"/completion";let St;F.subscribe(e=>{St=e});const bt=async()=>{await fetch(ee).then(e=>e.text()).then(e=>{St!="working"&&(e==="connected"?F.set("connected"):F.set("disconnected"))}).catch(e=>{console.error(e),F.set("disconnected")})},Tt=async e=>{F.set("working"),await fetch(ne+`?prompt=${e}`).then(t=>t.text()).then(t=>{F.set("connected"),ct.set(t)}).catch(t=>{console.error(t)})},re=e=>{let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},se=async()=>{await Tt("Start a fictional fairytale story:"),console.log("now")},oe=async e=>{let t=re("continue this story: "+e);await Tt(t)};function ie(e){let t;return{c(){t=w("span"),z(t,"class","svelte-1rn9lw9")},m(n,s){b(n,t,s)},p:h,i:h,o:h,d(n){n&&g(t)}}}class R extends W{constructor(t){super(),H(this,t,null,ie,j,{})}}function le(e){let t,n,s,r,i,o,l,f,c,d,a,$,m,_,E,y,A,M,p,N,q;return t=new R({}),r=new R({}),l=new R({}),d=new R({}),m=new R({}),y=new R({}),p=new R({}),{c(){n=w("div"),T(t.$$.fragment),s=P(),i=w("div"),T(r.$$.fragment),o=P(),f=w("div"),T(l.$$.fragment),c=P(),a=w("div"),T(d.$$.fragment),$=P(),_=w("div"),T(m.$$.fragment),E=P(),A=w("div"),T(y.$$.fragment),M=P(),N=w("div"),T(p.$$.fragment),v(n,"display","contents"),v(n,"--width","5em"),v(i,"display","contents"),v(i,"--width","2em"),v(f,"display","contents"),v(f,"--width","1em"),v(a,"display","contents"),v(a,"--width","4em"),v(_,"display","contents"),v(_,"--width","2em"),v(A,"display","contents"),v(A,"--width","0.5em"),v(N,"display","contents"),v(N,"--width","0.5em")},m(u,S){b(u,n,S),L(t,n,null),b(u,s,S),b(u,i,S),L(r,i,null),b(u,o,S),b(u,f,S),L(l,f,null),b(u,c,S),b(u,a,S),L(d,a,null),b(u,$,S),b(u,_,S),L(m,_,null),b(u,E,S),b(u,A,S),L(y,A,null),b(u,M,S),b(u,N,S),L(p,N,null),q=!0},p:h,i(u){q||(k(t.$$.fragment,u),k(r.$$.fragment,u),k(l.$$.fragment,u),k(d.$$.fragment,u),k(m.$$.fragment,u),k(y.$$.fragment,u),k(p.$$.fragment,u),q=!0)},o(u){x(t.$$.fragment,u),x(r.$$.fragment,u),x(l.$$.fragment,u),x(d.$$.fragment,u),x(m.$$.fragment,u),x(y.$$.fragment,u),x(p.$$.fragment,u),q=!1},d(u){u&&t&&g(n),C(t,u),u&&g(s),u&&r&&g(i),C(r,u),u&&g(o),u&&l&&g(f),C(l,u),u&&g(c),u&&d&&g(a),C(d,u),u&&g($),u&&m&&g(_),C(m,u),u&&g(E),u&&y&&g(A),C(y,u),u&&g(M),u&&p&&g(N),C(p,u)}}}class ce extends W{constructor(t){super(),H(this,t,null,le,j,{})}}function ue(e){return{c:h,m:h,i:h,o:h,d:h}}function fe(e){return{c:h,m:h,i:h,o:h,d:h}}function ae(e){let t,n;return t=new ce({}),{c(){T(t.$$.fragment)},m(s,r){L(t,s,r),n=!0},i(s){n||(k(t.$$.fragment,s),n=!0)},o(s){x(t.$$.fragment,s),n=!1},d(s){C(t,s)}}}function de(e){let t,n,s,r,i,o={ctx:e,current:null,token:null,hasCatch:!1,pending:ae,then:fe,catch:ue,blocks:[,,,]};return yt(n=e[2],o),{c(){t=w("div"),o.block.c(),z(t,"contenteditable","true"),z(t,"id","writingWindow"),z(t,"class","svelte-1yie9kv"),e[3]===void 0&&U(()=>e[9].call(t))},m(l,f){b(l,t,f),o.block.m(t,o.anchor=null),o.mount=()=>t,o.anchor=null,e[3]!==void 0&&(t.textContent=e[3]),e[10](t),s=!0,r||(i=[B(t,"input",e[9]),B(t,"keydown",e[4]),B(t,"focus",function(){G(e[0])&&e[0].apply(this,arguments)}),B(t,"focusout",function(){G(e[0])&&e[0].apply(this,arguments)}),B(t,"blur",function(){G(e[0])&&e[0].apply(this,arguments)}),B(t,"scroll",e[5])],r=!0)},p(l,[f]){e=l,o.ctx=e,f&4&&n!==(n=e[2])&&yt(n,o),f&8&&e[3]!==t.textContent&&(t.textContent=e[3])},i(l){s||(k(o.block),s=!0)},o(l){for(let f=0;f<3;f+=1){const c=o.blocks[f];x(c)}s=!1},d(l){l&&g(t),o.block.d(),o.token=null,o=null,e[10](null),r=!1,X(i)}}}function me(e,t,n){let s;kt(e,K,p=>n(3,s=p));let{callback:r}=t,i;function o(){i.focus()}function l(){return i}let f;K.subscribe(p=>{f=p});let c;ct.subscribe(p=>{c=p});let d=null;at(()=>{K.set(""),ct.set(""),n(2,d=m())});const a=p=>p.replace(/(\r\n|\n|\r)/gm,""),$=(p,N)=>{var q=document.createRange(),u=window.getSelection();q.setStart(p.childNodes[0],N.length),q.collapse(!0),u.removeAllRanges(),u.addRange(q)},m=async()=>{n(2,d=se()),await d,await K.set(a(c))},_=async p=>{n(2,d=oe(p)),await d,await K.set(f+" "+a(c)),$(i,s)},E=p=>{typeof p<"u"?p.keyCode:p.which,p.key==="Tab"&&(p.preventDefault(),_())},y=()=>{i.blur()};function A(){s=this.textContent,K.set(s)}function M(p){Q[p?"unshift":"push"](()=>{i=p,n(1,i)})}return e.$$set=p=>{"callback"in p&&n(0,r=p.callback)},[r,i,d,s,E,y,o,l,_,A,M]}class pe extends W{constructor(t){super(),H(this,t,me,de,j,{callback:0,focus:6,me:7,continueAdventure:8})}get focus(){return this.$$.ctx[6]}get me(){return this.$$.ctx[7]}get continueAdventure(){return this.$$.ctx[8]}}function _e(e,{delay:t=0,duration:n=400,easing:s=wt}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:s,css:i=>`opacity: ${i*r}`}}function he(e){let t;return{c(){t=w("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="svelte-8hbimu"><path d="M234.7 42.7L197 56.8c-3 1.1-5 4-5 7.2s2 6.1 5 7.2l37.7 14.1L248.8 123c1.1 3 4 5 7.2 5s6.1-2 7.2-5l14.1-37.7L315 71.2c3-1.1 5-4 5-7.2s-2-6.1-5-7.2L277.3 42.7 263.2 5c-1.1-3-4-5-7.2-5s-6.1 2-7.2 5L234.7 42.7zM46.1 395.4c-18.7 18.7-18.7 49.1 0 67.9l34.6 34.6c18.7 18.7 49.1 18.7 67.9 0L529.9 116.5c18.7-18.7 18.7-49.1 0-67.9L495.3 14.1c-18.7-18.7-49.1-18.7-67.9 0L46.1 395.4zM484.6 82.6l-105 105-23.3-23.3 105-105 23.3 23.3zM7.5 117.2C3 118.9 0 123.2 0 128s3 9.1 7.5 10.8L64 160l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L128 160l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L128 96 106.8 39.5C105.1 35 100.8 32 96 32s-9.1 3-10.8 7.5L64 96 7.5 117.2zm352 256c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L416 416l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L480 416l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L480 352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L416 352l-56.5 21.2z"></path></svg>',z(t,"class","svelte-8hbimu")},m(n,s){b(n,t,s)},p:h,i:h,o:h,d(n){n&&g(t)}}}class $e extends W{constructor(t){super(),H(this,t,null,he,j,{})}}function ge(e){let t,n,s,r,i,o;return s=new $e({}),{c(){t=w("div"),n=w("button"),T(s.$$.fragment),z(n,"class","svelte-tm3ceh"),z(t,"id","bar"),z(t,"class","svelte-tm3ceh")},m(l,f){b(l,t,f),D(t,n),L(s,n,null),e[4](t),r=!0,i||(o=B(n,"click",e[1]),i=!0)},p:h,i(l){r||(k(s.$$.fragment,l),r=!0)},o(l){x(s.$$.fragment,l),r=!1},d(l){l&&g(t),C(s),e[4](null),i=!1,o()}}}function zt(){}function ye(e,t,n){const s=Vt();let r=window.visualViewport.height,i=window.visualViewport,o,l;at(()=>{n(0,o.style.bottom=`${r-i.height}px`,o)});function f(){l||(l=Zt(o,_e,{duration:500})),l.start()}const c=$=>{s("barInteraction",{type:"continueAdventure"})},d=()=>{/iPhone|iPad|iPod/.test(window.navigator.userAgent)||(r=i.height),n(0,o.style.bottom=`${r-i.height}px`,o)};window.visualViewport.addEventListener("resize",d);function a($){Q[$?"unshift":"push"](()=>{o=$,n(0,o)})}return[o,c,f,zt,a]}class be extends W{constructor(t){super(),H(this,t,ye,ge,j,{transition:2,focus:3})}get transition(){return this.$$.ctx[2]}get focus(){return zt}}function we(e){let t,n;return{c(){t=w("div"),z(t,"id","status"),z(t,"class",n=_t(e[0])+" svelte-jtfmqh")},m(s,r){b(s,t,r)},p(s,[r]){r&1&&n!==(n=_t(s[0])+" svelte-jtfmqh")&&z(t,"class",n)},i:h,o:h,d(s){s&&g(t)}}}function ve(e,t,n){let s;kt(e,F,i=>n(0,s=i)),at(async()=>{r()});const r=async()=>{bt(),setInterval(async()=>{bt()},2e3)};return[s]}class ke extends W{constructor(t){super(),H(this,t,ve,we,j,{})}}function xe(e){let t,n,s,r,i;return r=new ke({}),{c(){t=w("div"),n=w("h1"),n.textContent="Adventure Writer",s=P(),T(r.$$.fragment),z(t,"class","svelte-1ly5bqw")},m(o,l){b(o,t,l),D(t,n),D(t,s),L(r,t,null),i=!0},p:h,i(o){i||(k(r.$$.fragment,o),i=!0)},o(o){x(r.$$.fragment,o),i=!1},d(o){o&&g(t),C(r)}}}class Le extends W{constructor(t){super(),H(this,t,null,xe,j,{})}}function Ce(e){let t,n,s,r,i,o,l,f,c,d;U(e[8]),n=new Le({});let a={callback:e[6]};r=new pe({props:a}),e[9](r),r.$on("blur",e[5]);let $={};return o=new be({props:$}),e[10](o),o.$on("barInteraction",e[7]),{c(){t=w("main"),T(n.$$.fragment),s=P(),T(r.$$.fragment),i=P(),l=w("div"),T(o.$$.fragment),v(l,"display","contents"),v(l,"--visibility",e[0])},m(m,_){b(m,t,_),L(n,t,null),D(t,s),L(r,t,null),D(t,i),D(t,l),L(o,l,null),f=!0,c||(d=B(window,"resize",e[8]),c=!0)},p(m,[_]){const E={};r.$set(E),_&1&&v(l,"--visibility",m[0]);const y={};o.$set(y)},i(m){f||(k(n.$$.fragment,m),k(r.$$.fragment,m),k(o.$$.fragment,m),f=!0)},o(m){x(n.$$.fragment,m),x(r.$$.fragment,m),x(o.$$.fragment,m),f=!1},d(m){m&&g(t),C(n),e[9](null),C(r),e[10](null),C(o),c=!1,d()}}}function Ee(e,t,n){let s="hidden",r,i,o,l,f;const c=()=>{setTimeout(()=>{document.activeElement===r.me()?n(0,s="visible"):n(0,s="hidden"),o.transition()},200)},d=_=>{_.detail.type==="continueAdventure"&&r.continueAdventure(),r.focus(),o.focus()};function a(){n(3,l=window.innerWidth),n(4,f=window.innerHeight)}function $(_){Q[_?"unshift":"push"](()=>{r=_,n(1,r)})}function m(_){Q[_?"unshift":"push"](()=>{o=_,n(2,o)})}return[s,r,o,l,f,i,c,d,a,$,m]}class Ae extends W{constructor(t){super(),H(this,t,Ee,Ce,j,{})}}new Ae({target:document.getElementById("app")});
